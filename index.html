<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/scoreBoard.css">
    <script type="text/javascript" src="BattleShip.js"></script>
    <script type="text/javascript" src="BattleShipComputer.js"></script>
    <script>
        alert("BATTLESHIP GAME \n  30 points to win ")
    </script>
</head>

<body>
    <h1>BATTLESHIP</h1>
    <div class="game">
        <div class="computer">
            <h2><b>COMPUTER</b></h2>
            <table>
                <script type="text/javascript">
                    //import {addVerticalFourShip} from './BattleShip.js';
                    const battleship = new BattleshipPlayer("yellow", "blue", "darkgreen", "wheat", "purple")
                    battleship.arrayInit()
                    battleship.addSingleShip()
                    battleship.addSingleShip()
                    battleship.addHorizontalDoubleShip()
                    battleship.addVerticalDoubleShip()
                    battleship.addHorizontalTripleShip()
                    battleship.addVerticalTripleShip()
                    battleship.addHorizontalFourShip()
                    battleship.addVerticalFourShip()
                    battleship.addHorizontalFiveShip()
                    battleship.addVerticalFiveShip()
                    for (var i = 0; i < 10; i++) {
                        document.write("<tr>")
                        for (var j = 0; j < 10; j++) {
                            if (gridArrayBattleShip[i][j] == null) {
                                document.write("<td id='computer" + String(i) + String(j) +
                                    "' style='background:white;opacity:0.3;text-align:center'></td>")
                            } else {
                                document.write("<td id='computer" + String(i) + String(j) + "' style='background:" +
                                    gridArrayBattleShip[i][j] + ";text-align:center'></td>")
                            }
                        }
                        document.write("</tr>")

                    }
                </script>
            </table>
        </div>
        <div class="reset"><button id="reset" onclick='reset()'></button></div>
        <div class="player">
            <h2><b>PLAYER</b></h2>
            <table>
                <script>
                    const battleship1 = new BattleshipComputer("blue", "darkgreen", "red", "purple", "wheat");
                    battleship1.arrayInit()
                    battleship1.addSingleShip()
                    battleship1.addSingleShip()
                    battleship1.addHorizontalDoubleShip()
                    battleship1.addVerticalDoubleShip()
                    battleship1.addHorizontalTripleShip()
                    battleship1.addVerticalTripleShip()
                    battleship1.addHorizontalFourShip()
                    battleship1.addVerticalFourShip()
                    battleship1.addHorizontalFiveShip()
                    battleship1.addVerticalFiveShip()


                    for (var i = 0; i < 10; i++) {
                        document.write("<tr>")
                        for (var j = 0; j < 10; j++) {
                            document.write("<td id='player" + String(i) + String(j) +
                                "'><input type='submit' onclick='playerChance(" + i + "," + j +
                                ")'  value='' id='" + String(i) + String(j) + "' ></td>");
                            //  document.write("<td><input type='submit' onclick='battleship.computerChance()'  value='' id=["+ String(i)+String(j)+ "] ></td>")
                            //      console.log(String(i)+String(j))
                        }
                        document.write("</tr>")
                    }


                    function computerChance() {
                        var randomSelectX = Math.floor(Math.random() * 10);
                        var randomSelectY = Math.floor(Math.random() * 10);
                        var i = randomSelectX
                        var j = randomSelectY
                        if (gridArrayBattleShip[i][j] != "selected") {
                            if (gridArrayBattleShip[i][j] == null) { // null, selected ,color
                                gridArrayBattleShip[i][j] = "selected"
                                document.getElementById("computer" + String(i) + String(j)).innerHTML =
                                    "<b style='color:red'>X</b>"
                            } else {
                                gridArrayBattleShip[i][j] = "selected"
                                document.getElementById("computer" + String(i) + String(j)).innerHTML =
                                    "<b style='color:red'>X</b>"
                                //console.log("COMPUTER GOT " + battleship.computerPoints() + " POINTS");
                                document.getElementById("computer_score").innerHTML = battleship.computerPoints();
                            }
                        } else {
                            computerChance()
                        }
                    }



                    function playerChance(i, j) {
                        if (gridArrayBattleShip1[i][j] == null) {
                            document.getElementById(String(i) + String(j)).style.visibility = "hidden"


                        } else {
                            document.getElementById(String(i) + String(j)).style.visibility = "hidden"
                            document.getElementById("player" + String(i) + String(j)).style.background =
                                gridArrayBattleShip1[i][j]

                            gridArrayBattleShip1[i][j] = "selected"
                            document.getElementById("player_score").innerHTML = battleship1.playerPoints();
                        }
                        computerChance()
                    }

                    function reset() {
                        location.reload()
                    }
                </script>
            </table>

        </div>
    </div>

    <hr>
    <div class="game">
        <div class="computer">
            <div class="container">
                <h4 style="color: white"> *30 POINTS TO WIN</h4>
                <div class="computerScore">
                    <div id="computerhead">Computer</div>
                    <div id="computer_score">0</div>
                </div>
                <div class="playerScore">
                    <div id="playerhead">Player</div>
                    <div id="player_score">0</div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>